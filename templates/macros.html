
{%- macro dirchain(ls, lastbare=False) -%}
  {% if not lastbare %}
    {% set slash = joiner('/') %}
    {%- for label, uri in ls -%}
      {{ slash() }}<a href="{{ approot }}/{{ uri|urlencode }}">{{ label }}</a>
    {%- endfor -%}
  {% else %}
    {% set slash = joiner('/') %}
    {%- for label, uri in ls[0:-1] -%}
      {{ slash() }}<a href="{{ approot }}/{{ uri|urlencode }}">{{ label }}</a>
    {%- endfor -%}
    {{ slash() }}{{ ls[-1][0] }}
  {% endif %}
{%- endmacro -%}

{%- macro optlink(text, uri, flag) -%}
  {%- if flag -%}
    <a href="{{ approot }}{{ uri|urlencode }}">{{ text }}</a>
  {%- else -%}
    {{ text }}
  {%- endif -%}
{%- endmacro -%}
