{% extends "directory_base.html" %}
{% from 'macros.html' import dirchain %}

{% block title %}Archive/{{ dirname }}{% endblock %}

{% block usetitle %}
<h1>{{ dirchain(uribase|splituri, lastbare=True) }}</h1>
{% endblock %}

{% block prefilelist %}

<p>(Public page:
  {% if not dirname %}
    <a href="https://ifarchive.org/indexes/if-archive/">index</a>,
    <a href="https://ifarchive.org/if-archive/">raw</a>)
  {% else %}
    <a href="https://ifarchive.org/indexes/if-archive/{{ dirname|urlencode }}/">index</a>,
    <a href="https://ifarchive.org/if-archive/{{ dirname|urlencode }}/">raw</a>)
  {% endif %}
</p>

<dl class="FileList">
  {% for dir in subdirs %}
    <dt><span class="Details">Subdir:</span>
    <code><a href="{{ approot }}/{{ uribase|urlencode }}/{{ dir.name|urlencode }}">{{ dir.name }}</a></code>
    {% if dir.islink %}
      <span class="Details">(symlink
      {% if dir.broken %}<b>broken</b>{% endif %}
      &#x2192;
      {% if dir.broken %}
        <code>{{ dir.target }}</code>
      {%- else -%}
        <code><a href="{{ approot }}/{{ dir.realuri|urlencode }}">{{ dir.target }}</a></code>
      {%- endif -%}
    )</span>
    {% endif %}
  {% endfor %}
</dl>

{% endblock %}
